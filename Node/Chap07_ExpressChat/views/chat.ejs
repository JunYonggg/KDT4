<!DOCTYPE html>
<html lang="ko">
  <head>
    <title>채팅</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" />
    <link rel="shortcut icon" href="/img/favicon.ico" />
  </head>
  <body class="well">
    <h1>채팅창</h1>
    <div class="form-group">
      <textarea id="panel" rows="20" cols="70" class="form-control" disabled></textarea>
    </div>
    <div class="form-inline">
      <output><%=username%></output>
      <input class="form-control" type="text" size="80" autofocus />
      <button type="button" class="btn btn-success">메세지 전송</button>
      <button class="btn btn-danger" id="logout">로그아웃</button>
    </div>

    <!-- <script type="text/javascript" src="/socket.io/socket.io.js"></script> -->
    <script>
      /*
      const ws = io();
      ws.emit('login', '<%=username %>');

      const panel = document.querySelector('#panel');
      ws.on('toClient', (data) => {
        panel.value = panel.value + data + '\n';
        panel.scrollTop = panel.scrollHeight;
      });

      const input = document.querySelector('input');
      const send = () => {
        ws.emit('chat', input.value);
        input.value = '';
        input.focus();
      };

      const btn = document.querySelector('button');
      if (btn) {
        btn.addEventListener('click', send);
        input.addEventListener('keydown', function (evt) {
          if (evt.keyCode === 13) send();
        });
      }
      */

      document.querySelector('#logout').addEventListener('click', (evt) => {
        // ws.emit('logout');
        location.assign('/logout');
      });
    </script>
  </body>
</html>
